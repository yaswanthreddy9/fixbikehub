<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>BikeFix Hub</title>

<style>
  body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; }
  header { background:#0f172a; color:white; padding:15px; }
  .container { padding:20px; }

  .buttons { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:15px; }
  .btn {
    padding:8px 14px;
    border-radius:20px;
    border:1px solid #ccc;
    background:white;
    cursor:pointer;
  }
  .btn.active {
    background:#2563eb;
    color:white;
    border-color:#2563eb;
  }

  .empty {
    background:#e5e7eb;
    padding:15px;
    border-radius:8px;
    text-align:center;
    color:#555;
  }
</style>
</head>

<body>

<header>
  <h2>BikeFix Hub</h2>
</header>

<div class="container">

  <h4>1. Choose Brand</h4>
  <div class="buttons" id="brandButtons">
    <button class="btn brand-btn" data-brand="hero">Hero MotoCorp</button>
    <button class="btn brand-btn" data-brand="bajaj">Bajaj Auto</button>
    <button class="btn brand-btn" data-brand="tvs">TVS Motor</button>
    <button class="btn brand-btn" data-brand="royal">Royal Enfield</button>
  </div>

  <h4>2. Choose Model</h4>
  <div class="buttons" id="modelButtons"></div>

  <div class="empty" id="emptyBox">
    No videos yet. Add videos using admin mode.
  </div>

</div>

<script>
/* =========================
   DATA
========================= */
const MODELS = {
  hero: ["Splendor Plus","HF Deluxe","Glamour"],
  bajaj: ["All Pulsar (General)","Pulsar 150","Pulsar NS200"],
  tvs: ["Apache RTR 160","Raider 125"],
  royal: ["Classic 350","Himalayan"]
};

const DEFAULT_BRAND = "hero";

/* =========================
   STATE (single source)
========================= */
let activeBrand = localStorage.getItem("activeBrand") || DEFAULT_BRAND;
let activeModel = localStorage.getItem("activeModel") || null;

/* =========================
   ELEMENTS
========================= */
const brandButtons = document.querySelectorAll(".brand-btn");
const modelContainer = document.getElementById("modelButtons");

/* =========================
   HELPERS
========================= */
function clearBrandActive() {
  brandButtons.forEach(b => b.classList.remove("active"));
}

function clearModelActive() {
  document.querySelectorAll(".model-btn")
    .forEach(b => b.classList.remove("active"));
}

/* =========================
   APPLY STATE
========================= */
function applyActiveBrand() {
  clearBrandActive();
  const btn = document.querySelector(
    `.brand-btn[data-brand="${activeBrand}"]`
  );
  if (btn) btn.classList.add("active");
}

function applyActiveModel() {
  clearModelActive();
  if (!activeModel) return;

  const btn = document.querySelector(
    `.model-btn[data-model="${activeModel}"]`
  );
  if (btn) btn.classList.add("active");
}

/* =========================
   LOAD MODELS
========================= */
function loadModels(brand) {
  modelContainer.innerHTML = "";
  activeModel = localStorage.getItem("activeModel");

  MODELS[brand].forEach(model => {
    const btn = document.createElement("button");
    btn.className = "btn model-btn";
    btn.textContent = model;
    btn.dataset.model = model;

    btn.onclick = () => {
      activeModel = model;
      localStorage.setItem("activeModel", model);
      applyActiveModel();
    };

    modelContainer.appendChild(btn);
  });

  applyActiveModel();
}

/* =========================
   EVENTS
========================= */
brandButtons.forEach(btn => {
  btn.onclick = () => {
    activeBrand = btn.dataset.brand;
    localStorage.setItem("activeBrand", activeBrand);
    localStorage.removeItem("activeModel");
    activeModel = null;

    applyActiveBrand();
    loadModels(activeBrand);
  };
});

/* =========================
   INIT (IMPORTANT ORDER)
========================= */
window.addEventListener("DOMContentLoaded", () => {
  applyActiveBrand();
  loadModels(activeBrand);
});
</script>

</body>
</html>

